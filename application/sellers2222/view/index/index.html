
			{include file="public/header" /}
			<link rel="stylesheet" type="text/css" href="/static/seller/css/myCenter.css" />
			<!-- 右边盒子部分 -->
			<div class="right" v-cloak>
				<!-- 用户信息盒子 -->
				<div class="right_box_item">
					<!-- 用户信息 -->
					<div class="user_info">
						<img class="user_touxiang" src="/static/seller/img/imgheade.png" alt="" />
						<div class="user_name">
							<p class="user_name_left1">{$seller.seller_name} <b>/会员用户名</b></p>
							<p class="user_name_left2">绑定手机号: <b>{$seller.mobile}</b></p>
						</div>
						<div class="vip_name">
							<p class="vip_name_left1">{if $seller.vip==1} vip会员 {else/} 普通用户 {/if}<b>/会员状态</b></p>
							<p class="vip_name_left2">到期时间: <b>{:date('Y-m-d',$seller.vip_time)}</b> <a href="javascript:;" @click="vip()"><<<strong>延时VIP</strong>>></a></p>
						</div>
					</div>
				</div>
				<!-- 充值入口 -->
				<div class="chongzhi">
					<div class="chongzhi_top">
						<a class="select_on">充值入口</a>
					</div>
					<div class="chongzhi_row">
						<!-- 我的押金 -->
						<div class="mybenjin">
							<p class="mybenjin_title">我的押金</p>
							<div class="mybenjin_row">
								<img src="/static/seller/img/yuanbao2.png" alt="" />
								<span class="mybenjin_price"> {$seller.balance} 元</span>
								<span class="mybenjin_txt">(可用押金)</span>
							</div>
							<!--<div class="mybenjin_row">
								<img src="/static/seller/img/yuanbao4.png" alt="" />
								<span class="mybenjin_price_color"> 0.00 元</span>
								<span class="mybenjin_txt">(冻结押金)</span>
							</div>
							<div class="mybenjin_row">
								<img src="/static/seller/img/yuanbao1.png" alt="" />
								<span class="mybenjin_price">{$seller.balance} 元</span>
								<span class="mybenjin_txt">(总押金)</span>
							</div>-->
							<div class="myyingding_btn">
								<el-button size="small" @click="chongzi()">充值</el-button>
								<el-button size="small" @click="cash()" type="primary">提现</el-button>
							</div>
						</div>
						<!-- 我的银锭 -->
						<div class="myyingding">
							<p class="myyingding_title">我的银锭</p>
							<div class="myyingding_row">
								<img src="/static/seller/img/yuanbao3.png" alt="" />
								<span class="myyingding_price">{$seller.reward} 银锭</span>
								<span class="myyingding_txt">(可用银锭)</span>
							</div>
							<div class="myyingding_row">
								<img src="/static/seller/img/yuanbao4.png" alt="" />&nbsp;&nbsp;&nbsp;
								<span class="myyingding_txt" style="color: red"> 银锭不可提现</span>
							</div>
							<!--<div class="myyingding_row">
								<img src="/static/seller/img/yuanbao1.png" alt="" />
								<span class="myyingding_price">{$seller.reward} 银锭</span>
								<span class="myyingding_txt">(总银锭)</span>
							</div>-->
							<div class="myyingding_btn">
								<el-button size="small" @click="chongzi()">充值</el-button>
							</div>
						</div>
						<!-- 邀请好友 -->
						<div class="myyaoqing">
							<p class="myyaoqing_title">邀请好友</p>
							<div class="myyaoqing_row">
								<img src="/static/seller/img/jinpai.png" alt="" />
								<span class="myyaoqing_price">总计获得奖励: {$seller.tj_award} 银锭</span>
							</div>
							<div class="myyaoqing_row">
								<img src="/static/seller/img/user_lan.png" alt="" />
								<span class="myyaoqing_price">总计邀请人数: {$num} 人</span>
							</div>
							<div class="myyaoqing_row_p">
								<span class="myyaoqing_price myyaoqing_margin">今 日 获 得 奖 励: {$seller.tj_award_day} 银锭</span>
							</div>
							<div class="myyaoqing_row_p">
								<span class="myyaoqing_price myyaoqing_margin">今 日 邀 请 人 数: {$num_day} 人</span>
							</div>
							<div class="myyingding_btn">
								<el-button size="small" @click="recommend()" type="primary">邀请</el-button>
							</div>
						</div>
					</div>
					<!-- 历史记录 -->
					<!--<div class="lishijilu">
						<span>历史记录:</span>
						<a href="javascript:;">押金记录</a>
						<a href="javascript:;">银锭记录</a>
						<a href="javascript:;">提现记录</a>
					</div>-->
				</div>
				<!-- 网站公告 -->
				<!--<div class="web_gonggao">
					<div class="gonggao_row">
						<div class="gonggao_top">
							<a href="javascript:;" class="select_on">网站公告</a>
						</div>
						<div class="gonggao_top">
							<a href="javascript:;">常见问题</a>
						</div>
					</div>
					<div class="web_news"></div>
				</div>-->
				<!-- 任务管理 -->
				<div class="renwuguanli_box">
					<!-- 任务管理标题 -->
					<div class="renwuguanli">
						<div class="renwuguanli_item">
							<a href="javascript:;" class="renwuguanli_item_select">任务管理</a>
						</div>
					</div>
					<div class="switch">
						<el-tabs v-model="activeName" @tab-click="handleClick">
							<el-tab-pane label="所有任务" name="first"></el-tab-pane>
							<el-tab-pane label="待付款" name="second"></el-tab-pane>
							<el-tab-pane label="待审核" name="third"></el-tab-pane>
							<el-tab-pane label="已通过" name="fourth"></el-tab-pane>
							<el-tab-pane label="已拒绝" name="fifth"></el-tab-pane>
							<el-tab-pane label="已取消" name="eighth"></el-tab-pane>
							<el-tab-pane label="已完成" name="sixth"></el-tab-pane>
							<el-tab-pane label="今日订单" name="seventh"></el-tab-pane>
						</el-tabs>
					</div>
					<!-- 选项卡第一行 -->
					<div class="select_row_one">
						<p>终端:</p>
						<el-select class="el_select label" v-model="info.terminal" clearable placeholder="全部" size="small">
							<el-option label="PC端" value="1"></el-option>
							<el-option label="移动端" value="2"></el-option>
						</el-select>
						<p> 店铺:</p>
						<el-select class="el_select label2" v-model="info.shop_id" clearable placeholder="全部" size="small">
							<el-option v-for="(item,key) in shop" :key="key" :label="item.shop_name" :value="item.id">
							</el-option>
						</el-select>
						<p>任务类型:</p>
						<el-select class="el_select label6" v-model="info.task_type" clearable placeholder="全部" size="small">
							<el-option v-for="(item,key) in taskType" :key="key" :label="item" :value="key">
							</el-option>
						</el-select>
					</div>
					<!-- 选项卡第二行 -->
					<div class="select_row_two">
						<p>任务起止时间:</p>
						<el-date-picker class="el_date label3" v-model="info.searchTime" type="daterange" range-separator="至"
														start-placeholder="开始日期" end-placeholder="结束日期" size="small" value-format="yyyy-MM-dd">
						</el-date-picker>
						<p>任务编号 : </p>
						<el-input v-model="info.search" placeholder="请输入内容" class="label5" size="small"></el-input>
						<p>淘宝单号 : </p>
						<el-input v-model="info.order_number" placeholder="请输入淘宝单号" class="label5" size="small"></el-input>
						<el-button type="primary" size="small" @click="search()"><i class="el-icon-search"></i> 搜索</el-button>
						<!--<el-button class="el_daochu" type="primary" size="small"><i class="el-icon-download"></i> 导出</el-button>-->
					</div>
					<!-- 切换 -->
					<div>
						<div class="swell">
							<div v-if="list.length == 0">
								<div class="no_null">暂无数据</div>
							</div>
							<div class="sample" v-for="(item,index) in list" :key="index">
								<div class="sample-top">
									<div class="sample-top-left">
										<img :src="item.shop_id.img" alt="" /> {{item.shop_id.shop_name.substr(0,3)+"..."}}
									</div>
									<div class="sample-top-right">
										<p>任务编号：<b>{{item.task_number}} [ <a href="javascript:void (0)" @click="view(item.id)">查看详情</a> ]</b></p>
										<p>发布时间：<b>{{item.publish_time}}</b></p>
										<p>任务类型：<strong>{{item.task_type}}</strong></p>
									</div>
								</div>
								<div class="sample-center">
									<img :src="item.goods_id[0].pc_img[0]" alt="" />
									{{item.goods_id[0].name}}
									<div class="center-btn">
										<el-button type="warning" size="small" class="el-button" v-if="item.status==1" @click="goToPay(item.id)"><i class="el-icon-d-arrow-right"></i> 继续发布
										</el-button>
										<el-button type="warning" size="small" class="el-button" v-if="item.nums==1" @click="goToCancel(item.id)"> 取消
										</el-button>
									</div>
								</div>
								<div class="sample-bottm">
									<div>
										<p>任务状态:<b>{{item.status_type}}</b></p>
										<p>进行中:(<b>{{item.jxz}}</b>)</p>
										<p>待发货:(<b>{{item.dfh}}</b>)</p>
										<p>待收货:(<b>{{item.dsh}}</b>)</p>
										<p>待返款:(<b>{{item.dfk}}</b>)</p>
										<p>已完成:(<b>{{item.ywc}}</b>)</p>
										<p>未接:(<b>{{item.incomplete_num}}</b>)</p>
									</div>
									<div>
										<p>押金:<b>{{item.deposit}}</b>元</p>
										<p>银锭:<b>{{item.silver_ingot}}</b>银锭</p>
									</div>
								</div>
							</div>
							<!-- 分页 -->
							<div class="fenye">
								<el-pagination @size-change="handleSizeChange" @current-change="handleCurrentChange" :current-page="currentPage"
															 :page-sizes="sizes" :page-size="info.size" layout="total, sizes, prev, pager, next, jumper" :total="total"
															 background>
								</el-pagination>
							</div>
						</div>
					</div>

				</div>

			</div>
			<script type="text/javascript">
				$(function() {
					/* 为element-ui组件提供数据绑定和事件 */
					var vm = new Vue({
						el: ".right",
						data: function() {
							return {
								// /* 待处理数据 */
								// activeName: "first",
								// /* 下拉选项卡数据 */
								info:{
									shop_id:'',
									task_type:'',
									searchTime:'',
									terminal:'',
									order_number:'',
									search:'',
									size:10,
									page:1,
									is_day:0,
									status:0,
								},
								shop:{},
								taskType: ["全部","文字好评","淘口令","二维码","直通车","通道任务"],
								sizes:[5,10,15,20,25],
								total:0,
								list:{},
								zhuangtai: '待付款', //状态
								activeName: 'first', //默认选项卡第一
								multipleTable: true,
								isActive: true,
								tabId: 0,

							}
						},
						created:function(){
							that = this;
							this.getShop();
							this.getData();
						},
						methods: {
							getShop:function(){
								$.post("{:url('task/shop')}",{},function(res){
									if(res.code==1){
										that.shop = res.data;
									}else{
										layer.msg('网络错误',{icon:2});
									}
								})
							},
							chongzi:function(){
								location.href = "{:url('recharge/recharge')}";
							},
							cash:function(){
								location.href = "{:url('recharge/cash')}";
							},
							recommend:function(){
								location.href = "{:url('recommend/index')}";
							},
							vip:function(){
								location.href = "{:url('vip/index')}";
							},
							getData:function(){
								var loading = layer.msg('正在读取数据，请稍候……', { icon: 16, shade: 0.5,shadeClose:false,time:6000 });
								$.post("{:url('task/getData')}",this.info,function(res){
									console.log(res.data);
									if(res.code==1){
										that.list = res.data.list;
										that.total = res.data.total;
										layer.close(loading);
									}else{
										layer.msg('网络错误',{icon:2});
										layer.close(loading);
									}
								})
							},
							search:function(){
								this.info.page = 1;
								this.info.size = 10;
								this.getData();
							},
							/* 分页事件 */
							handleSizeChange: function(val) {
								this.info.size = val;
								this.info.page = 1;
								this.getData();
							},
							/*分页跳转*/
							handleCurrentChange: function(val) {
								this.info.page = val;
								this.getData();
							},
							// 标签页
							handleClick(tab, event) {
								console.log(tab.index);
								this.zhuangtai = tab.label;
								this.info.is_day=0;
								this.info.page = 1;
								this.info.size = 10;
								if(tab.index==0)this.info.status = 0;
								if(tab.index==1)this.info.status = 1;
								if(tab.index==2)this.info.status = 2;
								if(tab.index==3)this.info.status = 3;
								if(tab.index==4)this.info.status = 4;
								if(tab.index==5)this.info.status = 5;
								if(tab.index==6)this.info.status = 6;
								if(tab.index==7){
									this.info.status = 0;
									this.info.is_day=1;
								}
								this.getData();
							},
							view:function(id){
								window.open("{:url('task/status','','',true)}/id/"+id);
							},
							goToPay:function(id){
								window.open("{:url('task/gotopay','','',true)}/id/"+id);
							},
							goToCancel:function(id){
								var that = this;
								this.$confirm('此操作将取消该订单, 是否继续?', '友情提示', {
									confirmButtonText: '确定',
									cancelButtonText: '取消',
									type: 'warning'
								}).then(function() {
									$.post("{:url('task/taskCancel')}",{id:id},function(res){
										if(res.code==1){
											layer.msg('取消成功',{icon:1},function(){
												that.getData();
											});
										}else{
											layer.msg(res.msg,{icon:2});
										}
									})
								}).catch(function() {});
							},

						}
					});
				});
			</script>
		{include file="public/footer" /}


